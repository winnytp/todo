(()=>{"use strict";const e=(()=>{function e(){document.getElementById("tasks-container").innerHTML="";let e=t.getProjectArrayLength();if(e)for(let n=0;n<e;n++){const e=document.getElementById("tasks-container");let o=document.createElement("div");o.classList.add("task-item"),o.setAttribute("data-index",n);let c=document.createElement("input");c.setAttribute("type","checkbox"),c.setAttribute("data-index",n),c.addEventListener("click",(e=>{let t=e.target.getAttribute("data-index");document.querySelector(`div[data-index='${t}']`).classList.toggle("complete-task")}));let d=document.createElement("p");d.textContent=t.getItem(n).title,d.setAttribute("data-index",n);let r=document.createElement("i");r.setAttribute("class","fas fa-ellipsis-h"),o.appendChild(c),o.appendChild(d),o.appendChild(r),o.addEventListener("click",(e=>i(e))),o.addEventListener("click",(()=>{})),e.appendChild(o)}}function n(e,t){let n=document.querySelector(".description"),i=document.getElementById("no-task-default-view");"hide"===e&&(n.classList.add("hidden"),i.classList.remove("hidden")),"show"===e&&(n.classList.remove("hidden"),n.setAttribute("data-index-array",`${t}`),i.classList.add("hidden"))}function i(e){if("INPUT"===e.target.tagName||"I"===e.target.tagName)return;let i=e.target.getAttribute("data-index"),o=document.querySelector("textarea");if(document.querySelector(".description-title > input").value=t.getItem(i).title,n("show",i),!t.getItem(i).description)return o.value="";o.value=t.getItem(i).description}function o(){let e=t.getProjectArrayLength()-1,i=document.querySelector("textarea");if(document.querySelector(".description-title > input").value=t.getItem(e).title,n("show",e),!t.getItem(e).description)return i.value="";i.value=t.getItem(e).description}return{addTask:function(){const t=document.getElementById("task-input");t.value&&(e(),t.value="",o())},switchProject:function(i){let o=document.querySelector(".selected");const c=document.getElementById("project-name");o.classList.remove("selected"),i.classList.add("selected"),c.textContent=t.getCurrentProject(),n("hide"),e()},drawAllTasks:function(){e()},editTitle:function(e,t){document.querySelector(`p[data-index='${e}']`).innerText=String(t)},showLastItem:o}})(),t=(()=>{let t={Today:[],Upcoming:[],Inbox:[{title:"Welcome to Todo",description:"This is a default description, edit me!"},{title:"What can you do with Todo?",description:"This is another default description."}]},n="Inbox",i=t[`${n}`];function o(e,t,n,i,o){const c={};return e&&(c.title=e),c.description=t,c.due=n,c.priority=i,c.completion=o,c}return{newTask:function(){let i=t[`${n}`];const c=document.getElementById("task-input");c.value&&(i.push(o(c.value)),console.table(i),e.addTask(),e.showLastItem())},switchProject:function(o){let c=o.target;i=t[`${c.textContent}`],n=c.textContent,console.log("Switched to: "+n),console.table(i),e.switchProject(c)},getCurrentProject:function(){return n},getItem:function(e){return t[`${n}`][e]},getProjectArrayLength:function(){return t[`${n}`].length},createDefaultInbox:function(){let e=t.Inbox;e.push(o("Welcome to Todo","This is a default description. Edit me!")),e.push(o("What can you do with Todo?","This is another default description."))},saveDescription:function(){let e=document.querySelector(".description").getAttribute("data-index-array"),t=document.querySelector("textarea");e&&(i[e].description=t.value)},saveTitle:function(){let t=document.querySelector(".description").getAttribute("data-index-array"),n=document.querySelector(".description-title > input").value;e.editTitle(t,n),i[t].title=n}}})();console.log("Todo App"),document.getElementById("add-task-btn").addEventListener("click",(()=>t.newTask())),document.getElementById("task-input").addEventListener("keypress",(e=>{"Enter"===e.key&&t.newTask()})),document.querySelectorAll(".project").forEach((e=>{e.addEventListener("click",(e=>t.switchProject(e)))})),document.querySelector("textarea").addEventListener("change",t.saveDescription),document.querySelector(".description-title > input").addEventListener("change",t.saveTitle),e.drawAllTasks()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBRUEsTUFrSEEsRUFsSDBCLE1BcUJ0QixTQUFTQSxJQUNpQkMsU0FBU0MsZUFBZSxtQkFDaENDLFVBQVksR0FFMUIsSUFBSUMsRUFBYywwQkFFbEIsR0FBS0EsRUFFTCxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUQsRUFBYUMsSUFBSyxDQUNsQyxNQUFNQyxFQUFnQkwsU0FBU0MsZUFBZSxtQkFDOUMsSUFBSUssRUFBVU4sU0FBU08sY0FBYyxPQUNyQ0QsRUFBUUUsVUFBVUMsSUFBSSxhQUN0QkgsRUFBUUksYUFBYSxhQUFjTixHQUVuQyxJQUFJTyxFQUFnQlgsU0FBU08sY0FBYyxTQUMzQ0ksRUFBY0QsYUFBYSxPQUFRLFlBQ25DQyxFQUFjRCxhQUFhLGFBQWNOLEdBRXpDTyxFQUFjQyxpQkFBaUIsU0FBVUMsSUFDckMsSUFBSUMsRUFBUUQsRUFBRUUsT0FBT0MsYUFBYSxjQUNuQmhCLFNBQVNpQixjQUFjLG1CQUFtQkgsT0FDaEROLFVBQVVVLE9BQU8sb0JBRzlCLElBQUlDLEVBQVNuQixTQUFTTyxjQUFjLEtBQ3BDWSxFQUFPQyxZQUFjLFVBQXVCaEIsR0FBR2lCLE1BQy9DRixFQUFPVCxhQUFhLGFBQWNOLEdBRWxDLElBQUlrQixFQUFPdEIsU0FBU08sY0FBYyxLQUNsQ2UsRUFBS1osYUFBYSxRQUFTLHFCQUUzQkosRUFBUWlCLFlBQVlaLEdBQ3BCTCxFQUFRaUIsWUFBWUosR0FDcEJiLEVBQVFpQixZQUFZRCxHQUVwQmhCLEVBQVFNLGlCQUFpQixTQUFVQyxHQUFNVyxFQUFrQlgsS0FDM0RQLEVBQVFNLGlCQUFpQixTQUFTLFNBTWxDUCxFQUFja0IsWUFBWWpCLElBSWxDLFNBQVNtQixFQUFxQkMsRUFBUVosR0FDbEMsSUFBSWEsRUFBa0IzQixTQUFTaUIsY0FBYyxnQkFDekNXLEVBQW9CNUIsU0FBU0MsZUFBZSx3QkFDakMsU0FBWHlCLElBQ0FDLEVBQWdCbkIsVUFBVUMsSUFBSSxVQUM5Qm1CLEVBQWtCcEIsVUFBVXFCLE9BQU8sV0FFeEIsU0FBWEgsSUFDQUMsRUFBZ0JuQixVQUFVcUIsT0FBTyxVQUNqQ0YsRUFBZ0JqQixhQUFhLG1CQUFvQixHQUFHSSxLQUNwRGMsRUFBa0JwQixVQUFVQyxJQUFJLFdBSXhDLFNBQVNlLEVBQWtCTSxHQUN2QixHQUE2QixVQUF6QkEsRUFBTWYsT0FBT2dCLFNBQWdELE1BQXpCRCxFQUFNZixPQUFPZ0IsUUFBaUIsT0FDdEUsSUFBSWpCLEVBQVFnQixFQUFNZixPQUFPQyxhQUFhLGNBQ2xDZ0IsRUFBV2hDLFNBQVNpQixjQUFjLFlBSXRDLEdBSGdCakIsU0FBU2lCLGNBQWMsOEJBQzdCZ0IsTUFBUSxVQUF1Qm5CLEdBQU9PLE1BQ2hESSxFQUFxQixPQUFRWCxJQUN4QixVQUF1QkEsR0FBT29CLFlBQWEsT0FBT0YsRUFBU0MsTUFBUSxHQUN4RUQsRUFBU0MsTUFBUSxVQUF1Qm5CLEdBQU9vQixZQUduRCxTQUFTQyxJQUNMLElBQUlyQixFQUFRLDBCQUF5QyxFQUNqRGtCLEVBQVdoQyxTQUFTaUIsY0FBYyxZQUl0QyxHQUhnQmpCLFNBQVNpQixjQUFjLDhCQUM3QmdCLE1BQVEsVUFBdUJuQixHQUFPTyxNQUNoREksRUFBcUIsT0FBUVgsSUFDeEIsVUFBdUJBLEdBQU9vQixZQUFhLE9BQU9GLEVBQVNDLE1BQVEsR0FDeEVELEVBQVNDLE1BQVEsVUFBdUJuQixHQUFPb0IsWUFZbkQsTUFBTyxDQUFFRSxRQTlHVCxXQUNJLE1BQU1DLEVBQVFyQyxTQUFTQyxlQUFlLGNBQ2pDb0MsRUFBTUosUUFDWGxDLElBQ0FzQyxFQUFNSixNQUFRLEdBQ2RFLE1BeUdjRyxjQXRHbEIsU0FBdUJ2QixHQUNuQixJQUFJd0IsRUFBaUJ2QyxTQUFTaUIsY0FBYyxhQUM1QyxNQUFNdUIsRUFBbUJ4QyxTQUFTQyxlQUFlLGdCQUNqRHNDLEVBQWUvQixVQUFVcUIsT0FBTyxZQUNoQ2QsRUFBT1AsVUFBVUMsSUFBSSxZQUNyQitCLEVBQWlCcEIsWUFBYyxzQkFFL0JLLEVBQXFCLFFBQ3JCMUIsS0E4RjZCMEMsYUFKakMsV0FDSTFDLEtBRzJDMkMsVUFUL0MsU0FBbUI1QixFQUFPbUIsR0FDVmpDLFNBQVNpQixjQUFjLGlCQUFpQkgsT0FDOUM2QixVQUFZQyxPQUFPWCxJQU82QkUsYUFBQUEsSUEvR3BDLEdDdUcxQixFQXZHdUIsTUFDbkIsSUFBSVUsRUFBYSxDQUNiQyxNQUFPLEdBQ1BDLFNBQVUsR0FDVkMsTUFBTyxDQUNILENBQ0kzQixNQUFPLGtCQUNQYSxZQUFhLDJDQUVqQixDQUNJYixNQUFPLDZCQUNQYSxZQUFhLDBDQVNyQmUsRUFBc0IsUUFDdEJDLEVBQWtCTCxFQUFXLEdBQUdJLEtBRXBDLFNBQVNFLEVBQUs5QixFQUFPYSxFQUFha0IsRUFBS0MsRUFBVUMsR0FDN0MsTUFBTUgsRUFBTyxHQU1iLE9BTEk5QixJQUFPOEIsRUFBSzlCLE1BQVFBLEdBQ3hCOEIsRUFBS2pCLFlBQWNBLEVBQ25CaUIsRUFBS0MsSUFBTUEsRUFDWEQsRUFBS0UsU0FBV0EsRUFDaEJGLEVBQUtHLFdBQWFBLEVBQ1hILEVBOERYLE1BQU8sQ0FBRUksUUEzRFQsV0FDSSxJQUFJQyxFQUFVWCxFQUFXLEdBQUdJLEtBQzVCLE1BQU1aLEVBQVFyQyxTQUFTQyxlQUFlLGNBQ2pDb0MsRUFBTUosUUFDWHVCLEVBQVFDLEtBQUtOLEVBQUtkLEVBQU1KLFFBQ3hCeUIsUUFBUUMsTUFBTUgsR0FDZCxZQUNBLG1CQXFESWxCLGNBNUNSLFNBQXVCUixHQUNuQixJQUFJZixFQUFTZSxFQUFNZixPQUVuQm1DLEVBQWtCTCxFQUFXLEdBQUc5QixFQUFPSyxlQUV2QzZCLEVBQXNCbEMsRUFBT0ssWUFFN0JzQyxRQUFRRSxJQUFJLGdCQUFrQlgsR0FDOUJTLFFBQVFDLE1BQU1ULEdBRWQsZ0JBQWdDbkMsSUFtQzVCOEMsa0JBakJSLFdBQ0ksT0FBT1osR0FpQkhhLFFBZFIsU0FBaUJDLEdBR2IsT0FGY2xCLEVBQVcsR0FBR0ksS0FDTGMsSUFhbkJDLHNCQVRSLFdBRUksT0FEeUJuQixFQUFXLEdBQUdJLEtBQXVCZ0IsUUFTMURDLG1CQXREUixXQUNJLElBQUlWLEVBQVVYLEVBQWtCLE1BQ2hDVyxFQUFRQyxLQUFLTixFQUFLLGtCQUFtQiw0Q0FDckNLLEVBQVFDLEtBQUtOLEVBQUssNkJBQThCLDBDQW9ENUNnQixnQkFwQ1IsV0FDSSxJQUNJQyxFQURrQnBFLFNBQVNpQixjQUFjLGdCQUNaRCxhQUFhLG9CQUMxQ3FELEVBQVVyRSxTQUFTaUIsY0FBYyxZQUNoQ21ELElBQ0xsQixFQUFnQmtCLEdBQVlsQyxZQUFjbUMsRUFBUXBDLFFBZ0M5Q3FDLFVBN0JSLFdBQ0ksSUFBSXhELEVBQVFkLFNBQVNpQixjQUFjLGdCQUFnQkQsYUFBYSxvQkFDNURLLEVBQVFyQixTQUFTaUIsY0FBYyw4QkFBOEJnQixNQUNqRSxZQUE0Qm5CLEVBQU9PLEdBQ25DNkIsRUFBZ0JwQyxHQUFPTyxNQUFRQSxLQTFFaEIsR0NGdkJxQyxRQUFRRSxJQUFJLFlBTVo1RCxTQUFTQyxlQUFlLGdCQUFnQlcsaUJBQWlCLFNBQVMsSUFBTSxjQUN4RVosU0FBU0MsZUFBZSxjQUFjVyxpQkFBaUIsWUFBYUMsSUFDbEQsVUFBVkEsRUFBRTBELEtBQ0YsZUFJVXZFLFNBQVN3RSxpQkFBaUIsWUFDaENDLFNBQVNDLElBQ2pCQSxFQUFLOUQsaUJBQWlCLFNBQVVrQixHQUFVLGdCQUE2QkEsUUFHM0U5QixTQUFTaUIsY0FBYyxZQUFZTCxpQkFBaUIsU0FBVSxtQkFDOURaLFNBQVNpQixjQUFjLDhCQUE4QkwsaUJBQWlCLFNBQVUsYUFFaEYsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL2Rpc3BsYXlDb250cm9sbGVyLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvcHJvamVjdEhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcHJvamVjdEhhbmRsZXIgZnJvbSBcIi4vcHJvamVjdEhhbmRsZXJcIjtcblxuY29uc3QgZGlzcGxheUNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIGFkZFRhc2soKSB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2staW5wdXQnKTtcbiAgICAgICAgaWYgKCFpbnB1dC52YWx1ZSkgcmV0dXJuO1xuICAgICAgICBfZHJhd0FsbFRhc2tzSW5Qcm9qZWN0KCk7XG4gICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG4gICAgICAgIHNob3dMYXN0SXRlbSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN3aXRjaFByb2plY3QodGFyZ2V0KSB7XG4gICAgICAgIGxldCBjdXJyZW50cHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZCcpO1xuICAgICAgICBjb25zdCBwcm9qZWN0VGl0bGVUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3QtbmFtZScpO1xuICAgICAgICBjdXJyZW50cHJvamVjdC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgcHJvamVjdFRpdGxlVGV4dC50ZXh0Q29udGVudCA9IHByb2plY3RIYW5kbGVyLmdldEN1cnJlbnRQcm9qZWN0KCk7XG5cbiAgICAgICAgZGVzY3JpcHRpb25Db250YWluZXIoJ2hpZGUnKTtcbiAgICAgICAgX2RyYXdBbGxUYXNrc0luUHJvamVjdCgpO1xuICAgIH1cblxuICAgIC8vIEVyYXNlcyBvbGQgdGFza3MsIHRoZW4gZHJhd3MgYWxsIHRoZSB0YXNrcyBpbiB0aGUgc2VsZWN0ZWQgcHJvamVjdFxuICAgIGZ1bmN0aW9uIF9kcmF3QWxsVGFza3NJblByb2plY3QoKSB7XG4gICAgICAgIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza3MtY29udGFpbmVyJyk7XG4gICAgICAgIHRhc2tDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgbGV0IGFycmF5TGVuZ3RoID0gcHJvamVjdEhhbmRsZXIuZ2V0UHJvamVjdEFycmF5TGVuZ3RoKCk7XG5cbiAgICAgICAgaWYgKCFhcnJheUxlbmd0aCkgcmV0dXJuO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgdGFza0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrcy1jb250YWluZXInKTtcbiAgICAgICAgICAgIGxldCBpdGVtRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBpdGVtRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2staXRlbScpO1xuICAgICAgICAgICAgaXRlbURpdi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnLCBpKTtcblxuICAgICAgICAgICAgbGV0IGlucHV0Q2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgaW5wdXRDaGVja2JveC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnY2hlY2tib3gnKTtcbiAgICAgICAgICAgIGlucHV0Q2hlY2tib3guc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgaSk7XG5cbiAgICAgICAgICAgIGlucHV0Q2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcpO1xuICAgICAgICAgICAgICAgIGxldCB0YXNrSXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdltkYXRhLWluZGV4PScke2luZGV4fSddYCk7XG4gICAgICAgICAgICAgICAgdGFza0l0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnY29tcGxldGUtdGFzaycpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCBwVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgICAgICBwVGl0bGUudGV4dENvbnRlbnQgPSBwcm9qZWN0SGFuZGxlci5nZXRJdGVtKGkpLnRpdGxlO1xuICAgICAgICAgICAgcFRpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcsIGkpO1xuXG4gICAgICAgICAgICBsZXQgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcbiAgICAgICAgICAgIGljb24uc2V0QXR0cmlidXRlKCdjbGFzcycsICdmYXMgZmEtZWxsaXBzaXMtaCcpO1xuXG4gICAgICAgICAgICBpdGVtRGl2LmFwcGVuZENoaWxkKGlucHV0Q2hlY2tib3gpO1xuICAgICAgICAgICAgaXRlbURpdi5hcHBlbmRDaGlsZChwVGl0bGUpO1xuICAgICAgICAgICAgaXRlbURpdi5hcHBlbmRDaGlsZChpY29uKTtcblxuICAgICAgICAgICAgaXRlbURpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBzd2l0Y2hEZXNjcmlwdGlvbihlKSk7XG4gICAgICAgICAgICBpdGVtRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGxldCBvbGRIaWdobGlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGlnaGxpZ2h0LXRhc2snKTtcbiAgICAgICAgICAgICAgICAvLyBvbGRIaWdobGlnaHQuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0LXRhc2snKTtcbiAgICAgICAgICAgICAgICAvLyBpdGVtRGl2LmNsYXNzTGlzdC50b2dnbGUoJ2hpZ2hsaWdodC10YXNrJyk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB0YXNrQ29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW1EaXYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVzY3JpcHRpb25Db250YWluZXIoYWN0aW9uLCBpbmRleCkge1xuICAgICAgICBsZXQgZGVzY3JpcHRpb25QYW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRlc2NyaXB0aW9uJyk7XG4gICAgICAgIGxldCBkZWZhdWx0Tm9UYXNrVmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduby10YXNrLWRlZmF1bHQtdmlldycpO1xuICAgICAgICBpZiAoYWN0aW9uID09PSAnaGlkZScpIHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uUGFuZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGRlZmF1bHROb1Rhc2tWaWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhY3Rpb24gPT09ICdzaG93Jykge1xuICAgICAgICAgICAgZGVzY3JpcHRpb25QYW5lLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgZGVzY3JpcHRpb25QYW5lLnNldEF0dHJpYnV0ZSgnZGF0YS1pbmRleC1hcnJheScsIGAke2luZGV4fWApO1xuICAgICAgICAgICAgZGVmYXVsdE5vVGFza1ZpZXcuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzd2l0Y2hEZXNjcmlwdGlvbihldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT09ICdJJykgcmV0dXJuO1xuICAgICAgICBsZXQgaW5kZXggPSBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWluZGV4Jyk7XG4gICAgICAgIGxldCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XG4gICAgICAgIGxldCB0aXRsZVRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGVzY3JpcHRpb24tdGl0bGUgPiBpbnB1dCcpO1xuICAgICAgICB0aXRsZVRleHQudmFsdWUgPSBwcm9qZWN0SGFuZGxlci5nZXRJdGVtKGluZGV4KS50aXRsZTtcbiAgICAgICAgZGVzY3JpcHRpb25Db250YWluZXIoJ3Nob3cnLCBpbmRleCk7XG4gICAgICAgIGlmICghcHJvamVjdEhhbmRsZXIuZ2V0SXRlbShpbmRleCkuZGVzY3JpcHRpb24pIHJldHVybiB0ZXh0QXJlYS52YWx1ZSA9ICcnO1xuICAgICAgICB0ZXh0QXJlYS52YWx1ZSA9IHByb2plY3RIYW5kbGVyLmdldEl0ZW0oaW5kZXgpLmRlc2NyaXB0aW9uO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dMYXN0SXRlbSgpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gcHJvamVjdEhhbmRsZXIuZ2V0UHJvamVjdEFycmF5TGVuZ3RoKCkgLSAxO1xuICAgICAgICBsZXQgdGV4dEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpO1xuICAgICAgICBsZXQgdGl0bGVUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRlc2NyaXB0aW9uLXRpdGxlID4gaW5wdXQnKTtcbiAgICAgICAgdGl0bGVUZXh0LnZhbHVlID0gcHJvamVjdEhhbmRsZXIuZ2V0SXRlbShpbmRleCkudGl0bGU7XG4gICAgICAgIGRlc2NyaXB0aW9uQ29udGFpbmVyKCdzaG93JywgaW5kZXgpO1xuICAgICAgICBpZiAoIXByb2plY3RIYW5kbGVyLmdldEl0ZW0oaW5kZXgpLmRlc2NyaXB0aW9uKSByZXR1cm4gdGV4dEFyZWEudmFsdWUgPSAnJztcbiAgICAgICAgdGV4dEFyZWEudmFsdWUgPSBwcm9qZWN0SGFuZGxlci5nZXRJdGVtKGluZGV4KS5kZXNjcmlwdGlvbjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlZGl0VGl0bGUoaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHBbZGF0YS1pbmRleD0nJHtpbmRleH0nXWApO1xuICAgICAgICB0aXRsZS5pbm5lclRleHQgPSBTdHJpbmcodmFsdWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRyYXdBbGxUYXNrcygpIHtcbiAgICAgICAgX2RyYXdBbGxUYXNrc0luUHJvamVjdCgpO1xuICAgIH1cblxuICAgIHJldHVybiB7IGFkZFRhc2ssIHN3aXRjaFByb2plY3QsIGRyYXdBbGxUYXNrcywgZWRpdFRpdGxlLCBzaG93TGFzdEl0ZW0sIH1cbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGRpc3BsYXlDb250cm9sbGVyIiwiaW1wb3J0IGRpc3BsYXlDb250cm9sbGVyIGZyb20gJy4vZGlzcGxheUNvbnRyb2xsZXIuanMnXG5cbmNvbnN0IHByb2plY3RIYW5kbGVyID0gKCgpID0+IHtcbiAgICBsZXQgcHJvamVjdE9iaiA9IHtcbiAgICAgICAgVG9kYXk6IFtdLFxuICAgICAgICBVcGNvbWluZzogW10sXG4gICAgICAgIEluYm94OiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGl0bGU6ICdXZWxjb21lIHRvIFRvZG8nLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhpcyBpcyBhIGRlZmF1bHQgZGVzY3JpcHRpb24sIGVkaXQgbWUhJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGl0bGU6ICdXaGF0IGNhbiB5b3UgZG8gd2l0aCBUb2RvPycsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGlzIGlzIGFub3RoZXIgZGVmYXVsdCBkZXNjcmlwdGlvbi4nLFxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgIH1cblxuICAgIGxldCBsaXN0T2JqID0ge1xuICAgICAgICBUYXNrczogW10sXG4gICAgfVxuXG4gICAgbGV0IF9jdXJyZW50UHJvamVjdE5hbWUgPSAnSW5ib3gnO1xuICAgIGxldCBfY3VycmVudFByb2plY3QgPSBwcm9qZWN0T2JqW2Ake19jdXJyZW50UHJvamVjdE5hbWV9YF07XG5cbiAgICBmdW5jdGlvbiB0YXNrKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlLCBwcmlvcml0eSwgY29tcGxldGlvbikge1xuICAgICAgICBjb25zdCB0YXNrID0ge307XG4gICAgICAgIGlmICh0aXRsZSkgdGFzay50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0YXNrLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRhc2suZHVlID0gZHVlO1xuICAgICAgICB0YXNrLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRhc2suY29tcGxldGlvbiA9IGNvbXBsZXRpb247XG4gICAgICAgIHJldHVybiB0YXNrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5ld1Rhc2soKSB7XG4gICAgICAgIGxldCBwcm9qZWN0ID0gcHJvamVjdE9ialtgJHtfY3VycmVudFByb2plY3ROYW1lfWBdO1xuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrLWlucHV0Jyk7XG4gICAgICAgIGlmICghaW5wdXQudmFsdWUpIHJldHVybjtcbiAgICAgICAgcHJvamVjdC5wdXNoKHRhc2soaW5wdXQudmFsdWUpKTtcbiAgICAgICAgY29uc29sZS50YWJsZShwcm9qZWN0KTtcbiAgICAgICAgZGlzcGxheUNvbnRyb2xsZXIuYWRkVGFzaygpO1xuICAgICAgICBkaXNwbGF5Q29udHJvbGxlci5zaG93TGFzdEl0ZW0oKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEZWZhdWx0SW5ib3goKSB7XG4gICAgICAgIGxldCBwcm9qZWN0ID0gcHJvamVjdE9ialsnSW5ib3gnXTtcbiAgICAgICAgcHJvamVjdC5wdXNoKHRhc2soJ1dlbGNvbWUgdG8gVG9kbycsIGBUaGlzIGlzIGEgZGVmYXVsdCBkZXNjcmlwdGlvbi4gRWRpdCBtZSFgKSk7XG4gICAgICAgIHByb2plY3QucHVzaCh0YXNrKCdXaGF0IGNhbiB5b3UgZG8gd2l0aCBUb2RvPycsIGBUaGlzIGlzIGFub3RoZXIgZGVmYXVsdCBkZXNjcmlwdGlvbi5gKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3dpdGNoUHJvamVjdChldmVudCkge1xuICAgICAgICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgICAgIF9jdXJyZW50UHJvamVjdCA9IHByb2plY3RPYmpbYCR7dGFyZ2V0LnRleHRDb250ZW50fWBdO1xuXG4gICAgICAgIF9jdXJyZW50UHJvamVjdE5hbWUgPSB0YXJnZXQudGV4dENvbnRlbnQ7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1N3aXRjaGVkIHRvOiAnICsgX2N1cnJlbnRQcm9qZWN0TmFtZSk7XG4gICAgICAgIGNvbnNvbGUudGFibGUoX2N1cnJlbnRQcm9qZWN0KTtcblxuICAgICAgICBkaXNwbGF5Q29udHJvbGxlci5zd2l0Y2hQcm9qZWN0KHRhcmdldCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2F2ZURlc2NyaXB0aW9uKCkge1xuICAgICAgICBsZXQgZGVzY3JpcHRpb25QYW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRlc2NyaXB0aW9uJyk7XG4gICAgICAgIGxldCBhcnJheUluZGV4ID0gZGVzY3JpcHRpb25QYW5lLmdldEF0dHJpYnV0ZSgnZGF0YS1pbmRleC1hcnJheScpO1xuICAgICAgICBsZXQgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XG4gICAgICAgIGlmICghYXJyYXlJbmRleCkgcmV0dXJuO1xuICAgICAgICBfY3VycmVudFByb2plY3RbYXJyYXlJbmRleF0uZGVzY3JpcHRpb24gPSBjb250ZW50LnZhbHVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmVUaXRsZSgpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRlc2NyaXB0aW9uJykuZ2V0QXR0cmlidXRlKCdkYXRhLWluZGV4LWFycmF5Jyk7XG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZXNjcmlwdGlvbi10aXRsZSA+IGlucHV0JykudmFsdWU7XG4gICAgICAgIGRpc3BsYXlDb250cm9sbGVyLmVkaXRUaXRsZShpbmRleCwgdGl0bGUpO1xuICAgICAgICBfY3VycmVudFByb2plY3RbaW5kZXhdLnRpdGxlID0gdGl0bGU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q3VycmVudFByb2plY3QoKSB7XG4gICAgICAgIHJldHVybiBfY3VycmVudFByb2plY3ROYW1lO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEl0ZW0ocG9zaXRpb24pIHtcbiAgICAgICAgbGV0IHByb2plY3QgPSBwcm9qZWN0T2JqW2Ake19jdXJyZW50UHJvamVjdE5hbWV9YF07XG4gICAgICAgIGxldCB0aGlzSXRlbSA9IHByb2plY3RbcG9zaXRpb25dO1xuICAgICAgICByZXR1cm4gdGhpc0l0ZW07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UHJvamVjdEFycmF5TGVuZ3RoKCkge1xuICAgICAgICBsZXQgcHJvamVjdEFycmF5TGVuZ3RoID0gcHJvamVjdE9ialtgJHtfY3VycmVudFByb2plY3ROYW1lfWBdLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHByb2plY3RBcnJheUxlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4geyBuZXdUYXNrLFxuICAgICAgICAgICAgc3dpdGNoUHJvamVjdCwgXG4gICAgICAgICAgICBnZXRDdXJyZW50UHJvamVjdCwgXG4gICAgICAgICAgICBnZXRJdGVtLCBcbiAgICAgICAgICAgIGdldFByb2plY3RBcnJheUxlbmd0aCxcbiAgICAgICAgICAgIGNyZWF0ZURlZmF1bHRJbmJveCxcbiAgICAgICAgICAgIHNhdmVEZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHNhdmVUaXRsZSxcbiAgICAgICAgfVxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgcHJvamVjdEhhbmRsZXIiLCJjb25zb2xlLmxvZygnVG9kbyBBcHAnKTtcblxuaW1wb3J0IHByb2plY3RIYW5kbGVyIGZyb20gJy4vcHJvamVjdEhhbmRsZXIuanMnXG5pbXBvcnQgZGlzcGxheUNvbnRyb2xsZXIgZnJvbSAnLi9kaXNwbGF5Q29udHJvbGxlci5qcydcblxuLy8gRXZlbnQgTGlzdGVuZXJzXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLXRhc2stYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBwcm9qZWN0SGFuZGxlci5uZXdUYXNrKCkpO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2staW5wdXQnKS5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIHByb2plY3RIYW5kbGVyLm5ld1Rhc2soKTtcbiAgICB9XG59KTtcblxubGV0IHByb2plY3RCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3QnKTtcbnByb2plY3RCdG5zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiBwcm9qZWN0SGFuZGxlci5zd2l0Y2hQcm9qZWN0KGV2ZW50KSk7XG59KTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBwcm9qZWN0SGFuZGxlci5zYXZlRGVzY3JpcHRpb24pO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRlc2NyaXB0aW9uLXRpdGxlID4gaW5wdXQnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBwcm9qZWN0SGFuZGxlci5zYXZlVGl0bGUpO1xuXG5kaXNwbGF5Q29udHJvbGxlci5kcmF3QWxsVGFza3MoKTtcblxuLy8gcHJvamVjdEhhbmRsZXIuY3JlYXRlRGVmYXVsdEluYm94KCk7Il0sIm5hbWVzIjpbIl9kcmF3QWxsVGFza3NJblByb2plY3QiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwiYXJyYXlMZW5ndGgiLCJpIiwidGFza0NvbnRhaW5lciIsIml0ZW1EaXYiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiaW5wdXRDaGVja2JveCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiaW5kZXgiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJxdWVyeVNlbGVjdG9yIiwidG9nZ2xlIiwicFRpdGxlIiwidGV4dENvbnRlbnQiLCJ0aXRsZSIsImljb24iLCJhcHBlbmRDaGlsZCIsInN3aXRjaERlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb25Db250YWluZXIiLCJhY3Rpb24iLCJkZXNjcmlwdGlvblBhbmUiLCJkZWZhdWx0Tm9UYXNrVmlldyIsInJlbW92ZSIsImV2ZW50IiwidGFnTmFtZSIsInRleHRBcmVhIiwidmFsdWUiLCJkZXNjcmlwdGlvbiIsInNob3dMYXN0SXRlbSIsImFkZFRhc2siLCJpbnB1dCIsInN3aXRjaFByb2plY3QiLCJjdXJyZW50cHJvamVjdCIsInByb2plY3RUaXRsZVRleHQiLCJkcmF3QWxsVGFza3MiLCJlZGl0VGl0bGUiLCJpbm5lclRleHQiLCJTdHJpbmciLCJwcm9qZWN0T2JqIiwiVG9kYXkiLCJVcGNvbWluZyIsIkluYm94IiwiX2N1cnJlbnRQcm9qZWN0TmFtZSIsIl9jdXJyZW50UHJvamVjdCIsInRhc2siLCJkdWUiLCJwcmlvcml0eSIsImNvbXBsZXRpb24iLCJuZXdUYXNrIiwicHJvamVjdCIsInB1c2giLCJjb25zb2xlIiwidGFibGUiLCJsb2ciLCJnZXRDdXJyZW50UHJvamVjdCIsImdldEl0ZW0iLCJwb3NpdGlvbiIsImdldFByb2plY3RBcnJheUxlbmd0aCIsImxlbmd0aCIsImNyZWF0ZURlZmF1bHRJbmJveCIsInNhdmVEZXNjcmlwdGlvbiIsImFycmF5SW5kZXgiLCJjb250ZW50Iiwic2F2ZVRpdGxlIiwia2V5IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpdGVtIl0sInNvdXJjZVJvb3QiOiIifQ==